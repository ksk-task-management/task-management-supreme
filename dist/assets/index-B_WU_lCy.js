(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const D=document.getElementById("area-notify"),he=document.getElementById("txt-notify-content"),T=document.getElementById("icon-notify"),B=document.getElementById("area-eventloading"),ye=document.getElementById("icon-area-eventload"),ze=document.getElementById("txt-area-eventload"),je=document.getElementById("txt-area-eventload-eventremaining"),ge=document.getElementById("page-login"),ve=document.getElementById("txt-login-username"),_=document.getElementById("input-login-username"),xe=document.getElementById("txt-login-email"),P=document.getElementById("input-login-email");document.getElementById("txt-login-password");const A=document.getElementById("input-login-password"),Q=document.getElementById("btn-begin-password-visible"),R=document.getElementById("btn-login-switchmode"),S=document.getElementById("btn-login"),$e=document.getElementById("btn-login-goto-register"),Ce=document.getElementById("page-register"),Ee=document.getElementById("input-register-name"),ke=document.getElementById("input-register-middlename"),be=document.getElementById("input-register-lastname"),we=document.getElementById("input-register-email"),Le=document.getElementById("input-register-username"),Se=document.getElementById("input-register-password"),Ie=document.getElementById("input-register-password-confirm"),We=document.getElementById("btn-register-goto-login"),w=document.getElementById("btn-register-newaccount"),Z=document.getElementById("page-cards-masonrylist"),Fe=document.querySelectorAll(".btn-create-card"),ee=document.getElementById("modal-container");function j(){return Math.floor(1e5+Math.random()*9e5).toString()}function Te(e){const n=window.innerWidth||document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight,a=e.top<t&&e.bottom>0,i=e.left<n&&e.right>0;return a&&i}function Ge(e,n){return(e.startsWith("#")?"":"#")+e+V(n)}function I(e,n=null,t=null,a=null,i=null){const o=e.startsWith("#")?e.substring(1):e;var r=(o[0]??"0")+(o[1]??"0");n&&(r=V(n));var s=(o[2]??"0")+(o[3]??"0");t&&(s=V(t));var l=(o[4]??"0")+(o[5]??"0");a&&(l=V(a));var c=(o[6]??"")+(o[7]??"");return i&&(c=V(Math.round(i/100*255))),`#${r}${s}${l}${c}`}function V(e){if(typeof e!="number"||isNaN(e))throw new Error("Input must be a valid number.");if(e<0||e>255)throw new Error("Color value must be between 0 and 255.");return e.toString(16).padStart(2,"0")}let O=[],W=!1;async function b(e,n,t=null){if(!e||!n||typeof n!="function")return Promise.reject(new Error("The event parameters are missing"));console.log("Added event : "+e);let a=new Promise((i,o)=>{O.push({name:e,event:n,icon:t,resolve:i,reject:o})});return He(),a}async function He(){if(W!==!0){if(O.length===0){console.log("[#] No events left to process."),Pe();return}for(W=!0;O.length>0;){const e=O.shift();if(!e||!e.event||typeof e.event!="function"||!e.resolve||!e.reject){console.error("[#] Invalid event in queue founded: Skipping",e),e&&e.reject&&e.reject(new Error("Invalid event in queue founded: Skipping"));continue}console.log("[#] Triggering Event: "+e.name),Ct(e.name,e.icon);try{console.log("Got Here");const n=await e.event();e.resolve(n)}catch(n){console.error("Error during event execution ("+e.name+"):",n),e.reject(n)}finally{console.log("[#] Event finished: "+e.name)}}W=!1,console.log("Queue processing finished."),Pe()}}function Je(){return O.length+(W?1:0)}function Ae(e){const n=document.createElement("div");return n.classList.add("txt-header"),n.textContent=e,n}function Ke(e,n){const t=document.createElement("div");t.classList.add("area-horizontal","area-fit-horizontal");const a=document.createElement("span");a.classList.add("material-symbols-outlined","icon","txt-header"),a.style.fontWeight="550",a.style.fontSize="1.4em",a.textContent=e,t.appendChild(a);const i=Ae(n);return t.appendChild(i),t}function Qe(e){const n=document.createElement("div");return n.classList.add("txt-header-description"),n.textContent=e,n.style.marginTop="-2px",n.style.marginBottom="7px",n.style.maxWidth="90%",n}function X(e,n,t){const a=document.createElement("button");a.classList.add("btn-normal","area-horizontal","area-center");const i=document.createElement("span");i.classList.add("material-symbols-outlined","icon","txt-header"),i.style.fontWeight="550",i.style.fontSize="1.4em",i.textContent=e,a.appendChild(i);const o=document.createElement("div");return o.classList.add("txt-header"),o.textContent=n,a.appendChild(o),t&&(a.onclick=t),a}let k=[];function ie(e){const n=j(),t=document.createElement("div");t.classList.add("window-modal","panel","area-padding20","area-fit-lim-handheld-90"),t.style.minWidth="30%",t.style.paddingTop="30px",t.appendChild(Ae(e));const a=document.createElement("button");a.classList.add("btn-modal-close","btn-normal","area-horizontal","area-center","placement-stick-top-right-5"),a.addEventListener("click",()=>Xe(n));const i=document.createElement("i");i.classList.add("material-symbols-outlined","icon"),i.textContent="close",a.appendChild(i),t.appendChild(a);const o={id:n,name:e,modal:t};return k.push(o),ee.appendChild(t),oe(),t}function Be(e){return k.find(n=>n.name===e)}function Xe(e){const n=k.findLastIndex(t=>t.id===e);n<0||(k.splice(n,1).forEach(t=>{t.modal.remove()}),oe())}function $(e){const n=k.findLastIndex(t=>t.name===e);n<0||(k.splice(n,1).forEach(t=>{t.modal.remove()}),oe())}function oe(){if(k.length>0){for(let e=0;e<k.length;e++)if(k[e].modal){if(e===k.length-1){k[e].modal.classList.remove("hidden");continue}k[e].modal.classList.add("hidden")}ee.classList.remove("hidden")}else ee.classList.add("hidden")}function te(){const e="Sheet Setting",n=ie(e);n.style.maxWidth="80%";const t=n.querySelector(".btn-modal-close");console.log(t),t&&(console.log("T2"),t.addEventListener("click",()=>{console.log("Close Clicked"),Ve()}));const a=Ke("data_table","Connected Google Sheet File");n.appendChild(a);const i=Qe("This Google Sheet file is for storing your data and is secured within your account. The data is not shared.");n.appendChild(i);const o=document.createElement("div");o.classList.add("area-horizonatal","btn-normal","area-center"),o.style.borderStyle="dashed",o.style.backgroundColor="#f2f2f2ff";const r=document.createElement("div");if(p.sheetUrl?(r.textContent=p.sheetUrl,r.style.textAlign="left",r.style.overflowX="hidden",r.style.whiteSpace="nowrap",r.style.textOverflow="ellipsis"):(r.textContent="<Not linked>",r.style.color="red",r.style.textAlign="center"),o.appendChild(r),n.appendChild(o),!p.sheetUrl||p.sheetUrl.length===0){const s=X("wand_stars","Generate New Sheet",async()=>{const c="New Sheet Name";Ye(c,"Give the sheet a name.",[()=>{var m=document.createElement("button");return m.classList.add("btn-normal"),m.textContent="Generate sheet name",m.onclick=async()=>{m.textContent="Generating...",Be(c)?.modal?.querySelectorAll("button, input").forEach(y=>{y.disabled=!0});const d=await b("Creating new user sheet",async()=>await U("setUserSheet",{uid:p.uid}),"wand_stars");p.sheetID=d.data.sheetID,p.sheetUrl=d.data.sheetUrl,x("success","Created a new data sheet: "+d.data.sheetName,"star_shine"),$(c),$(e),te()},m},()=>{var m=X("new_label","Apply Name",async()=>{var d=Be(c);if(d){var y=d.modal.querySelector("input");if(y&&y.value.trim().length<=0){x("error","Please input the data sheet name first.");return}d.modal.querySelectorAll("button, input").forEach(g=>{g.disabled=!0})}m.textContent="Applying...";const v=await b("Creating new user sheet",async()=>await U("setUserSheet",{uid:p.uid,sheetName:y.value.trim()}),"wand_stars");p.sheetID=v.data.sheetID,p.sheetUrl=v.data.sheetUrl,x("success","Created a new data sheet: "+v.data.sheetName,"star_shine"),$(c),$(e),te()});return m.classList.add("btn-primary"),m.querySelector(".icon").style.color="white",m.querySelector("div").style.color="white",m}])});s.classList.add("btn-stack","btn-primary"),s.querySelector(".icon").style.color="white",s.querySelector("div").style.color="white",n.appendChild(s);const l=X("place_item","Import Sheet",()=>{});l.classList.add("btn-stack"),n.appendChild(l)}if(p.sheetUrl&&p.sheetUrl.length>0){const s=document.createElement("button");s.classList.add("btn-normal"),s.style.color="red"}}function Ye(e,n,t){const a=ie(e);a.style.maxWidth="80%";const i=document.createElement("input");i.classList.add("input-text"),i.type="text",i.placeholder=n,a.appendChild(i);const o=document.createElement("div");if(o.classList.add("area-horizontal","area-center","area-fit-horizontal","btn-stack"),a.appendChild(o),t){for(var r of t)if(r){var s=r();s&&o.appendChild(s)}}}const Ze="##";var u=null;function J(e,n,t=!0){return u||(u=document.createElement("div"),u.classList.add("editor","context-menu"),document.addEventListener("click",a=>{u&&!u.contains(a.target)&&u.style.visibility==="visible"&&(u.style.visibility="hidden")})),document.getElementById("main-container").appendChild(u),!n||n.length<=0?u.style.visibility="hidden":(u.style.visibility="visible",u.innerHTML="",n=n.sort((a,i)=>(i.score||0)-(a.score||0)).splice(0,7),n.forEach((a,i)=>{const o=document.createElement("div");if(o.classList.add("area-horizontal","area-fit-horizontal","editor","btn-context-menu-item"),i===0&&o.classList.add("selected"),a.icon){const r=document.createElement("span");r.classList.add("material-symbols-outlined","icon"),r.textContent=a.icon,o.appendChild(r)}if(a.text){const r=document.createElement("span");r.innerHTML=a.text,o.appendChild(r)}if(a.textParts){const r=document.createElement("span");r.classList.add("area-horizontal","area-fit-horizontal","area-center"),a.textParts.forEach(s=>{const l=document.createElement("span");s.text&&(l.textContent=s.text),s.highlightColor&&(l.style.color=s.highlightColor,l.classList.add("txt-highlighted")),r.appendChild(l)}),o.appendChild(r)}a.color&&o.querySelectorAll("span").forEach(r=>r.style.color=a.color),a.fontSize&&o.querySelectorAll("span").forEach(r=>r.style.fontSize=a.fontSize),a.onClick&&o.addEventListener("click",()=>{a.onClick(),Me(),t&&e&&(e.tagName==="INPUT"?e.value="":e.textContent="")}),u.appendChild(o)})),u.dataset.currentSelected=0,tt(e),u}function Me(){u&&(u.style.visibility="hidden")}function Ne(e){if(u){var n=u.dataset.currentSelected?parseInt(u.dataset.currentSelected):0;u.children[n].classList.remove("selected"),n+=-e,n<0?n=u.children.length-1:n>u.children.length-1&&(n%=u.children.length),u.children[n].classList.add("selected"),u.dataset.currentSelected=n}}function et(){return u&&u.dataset.currentSelected?u.children[parseInt(u.dataset.currentSelected)]:null}function tt(e){if(u){const n=e.getBoundingClientRect();u.style.left=n.left+"px",u.style.top=n.top+n.height+"px";const t=u.getBoundingClientRect();Te(t)&&(u.style.top=n.top-t.height+"px")}}function nt(e,n,t,a){if(u){console.log("Custom Adjusting: ",e,n,t,a),u.style.left=e+"px",u.style.top=n+a+"px";const i=u.getBoundingClientRect();Te(i)&&(u.style.top=n-i.height+"px")}}function re(e,n){for(var t=[],a=e.split(""),i=n.split(""),o=a.shift(),r=i.shift();o;){if(r){var s=o===r;t.length>0&&t[t.length-1].addMode===s?t[t.length-1].text+=o:t.push({text:o,addMode:s})}if(s&&(r=i.shift(),!r&&a.length>0)){t.push({text:a.join("")});break}o=a.shift()}return t}function se(e,n=null){e.addEventListener("keydown",t=>{if(t.key==="ArrowUp")Ne(1),t.preventDefault();else if(t.key==="ArrowDown")Ne(-1),t.preventDefault();else if(t.key==="Enter"){var a=0;if(e.tagName==="INPUT"?a=t.target.value.length:a=t.target.textContent.length,a>0){const i=et();i&&(i.click(),t.preventDefault())}}n&&n()})}function at(e,n){!e||!n||n.length<=0||(console.log("T-1",n),n.forEach(t=>{const a=E.find(i=>i.key.includes(t.key));console.log("T-1# >>Creating Edtor For: ",t),K(e,"html",n,a,z(t.key,t))}))}function le(e,n,t,a=null){if(!e)return;const i=a?.inline===!0,o=a?.additive===!0,r=a?.forceDataToBeValue===!0;var s=null;i?(s=document.createElement("span"),s.contentEditable=!0,s.role="textbox",s.classList.add("editor","input-block-value","block-insert-omit"),s.addEventListener("click",l=>{l.target.focus()})):(s=document.createElement("input"),s.type="text",s.placeholder=`Type some block or command(${Ze})...`,s.classList.add("editor","input-text","input-text-seamless","block-insert-omit")),s.addEventListener("input",l=>{const c=l.target.value??l.target.textContent,m=[];E.forEach(d=>{!d.key||d.key.length<=0||ue(d,t)&&d.key.forEach(y=>{var v=re(y.toLowerCase(),c.toLowerCase());if(v.length>0){var g={icon:d.icon?d.icon(null):"token",textParts:v.map(f=>{const L={text:f.text};return f.addMode===!0&&(L.highlightColor="var(--color-selected)"),L}),onClick:()=>{var f=null;d.return.block?f=z(y,De(y,[])):f=z(y,void 0),de(n,f,r),o||i===!0&&e.querySelectorAll(".value-object").forEach(L=>{L.remove()}),K(e,t,n,d,f),o||ce(e)}};const h=v.filter(f=>f.addMode===!0).map(f=>f.text).join("");g.score=h.length,m.push(g)}})}),J(s,m)}),se(s),e.appendChild(s)}function ce(e,n=0){var t=null;if(Array.from(e.children).forEach(o=>{!t&&o.classList.contains("block-insert-omit")&&(t=o)}),!t||t.tagName!=="SPAN")return;e.querySelectorAll(".value-object").length-n>0?t.classList.add("hidden"):t.classList.remove("hidden")}function K(e,n,t,a,i,o=null){if(!a||!i)return null;var r=null;if(a.return&&a.return.block)r=it(e,i.value);else{const s=i.key;E.find(c=>c.key.includes(s))&&(n.includes("-")&&(o||(o={}),o.innerValueType=n.split("-")[1].trim()),r=C(i.key??n,i,null,"editor",o))}if(r){console.log("T2 Inserting the new editor: ",r,"Into",e,e.children.length);const s=Array.from(e.children).find(l=>l.classList.contains("block-insert-omit"));s&&e.contains(s)?(console.log("T2.1 Inserting before the caret: ",s),e.insertBefore(r,s)):e.appendChild(r),r.classList.add("value-object"),r.addEventListener("click",l=>{if(l.target.classList.toggle("clicked"),l.stopPropagation(),document.querySelectorAll(".value-object.clicked").forEach(c=>{c!==l.target&&c.classList.remove("clicked")}),l.target.classList.contains("clicked")){const m=J(r,[{text:"Delete",icon:"delete",color:"red",fontSize:"14px",onClick:()=>{console.log("Deleted: ",i),console.log("Remaining: ",t),rt(t,i),r.remove(),ce(e,1)}}],!1),d=r.getBoundingClientRect(),y=m.getBoundingClientRect(),v=Math.max(d.left,Math.min(l.clientX,d.left+d.width-y.width)),g=d.top;nt(v,g,d.width,d.height)}else Me()})}return r}function it(e,n){if(!e||!n||!n.key)return null;const t=E.find(c=>c.key&&c.key.includes(n.key));if(!t)return;const a=document.createElement("div");a.classList.add("editor","block-editor");const i=document.createElement("div");i.classList.add("area-horizontal","area-fit-horizontal","area-newline","editor","block-editor-key-area");const o=document.createElement("span");o.classList.add("material-symbols-outlined","icon"),o.textContent=t.icon?t.icon():"token",i.appendChild(o);const r=document.createElement("span");r.textContent=n.key,i.appendChild(r),a.appendChild(i);const s=document.createElement("div");s.classList.add("editor","block-value-area"),a.appendChild(s),n.value.forEach(c=>{const m=t.value.find(d=>d.refName===c.refName);m&&ot(s,m,c)});const l=document.createElement("span");return l.contentEditable=!0,l.role="textbox",l.classList.add("editor","input-block-value"),l.addEventListener("input",c=>{const m=[];t.value?.forEach(d=>{const y=E.find(h=>h.key.includes(d.type)&&h.return&&h.return[d.type]);if(!y)return;const v=re(d.refName.toLowerCase(),c.target.textContent.toLowerCase());if(v.length>0){var g={icon:y.icon?y.icon(null):"label",textParts:v.map(f=>{const L={text:f.text};return f.addMode===!0&&(L.highlightColor="var(--color-selected)"),L}),onClick:()=>{console.log(d,"is Clicked")}};const h=v.filter(f=>f.addMode===!0).map(f=>f.text).join("");g.score=h.length,m.push(g)}}),J(l,m)}),l.addEventListener("click",c=>{c.target.focus()}),se(l),s.appendChild(l),a}function ot(e,n,t){var a=null;t.value&&t.value.key&&(a=E.find(l=>l.key.includes(t.value.key))),console.log("T@ Generating a value editor for: ",n,"-->",a,t);const i=document.createElement("span");i.classList.add("editor","value-editor");const o=document.createElement("span");o.classList.add("editor","area-horizontal","area-fit-horizontal","value-header-area"),i.appendChild(o);const r=document.createElement("span");r.classList.add("material-symbols-outlined","icon"),r.textContent=a&&a.icon?a.icon():"label",o.appendChild(r);const s=document.createElement("span");s.classList.add("txt-value-label"),s.textContent=n.name,o.appendChild(s),a&&K(i,n.type,t,a,t.value),le(i,t,n.type,{inline:!0}),ce(i),e.appendChild(i)}function _e(e,n,t,a=null,i=null){const o=document.createElement("span");o.classList.add("editor","input-enum-area-minimum");var r=null;a&&(r=document.createElement("span"),r.classList.add("icon","material-symbols-outlined","input-enum-area-dropdownselect"),r.textContent=a||"arrow_drop_down_circle",o.appendChild(r));const s=document.createElement("span");s.classList.add("editor","input-text-minimum"),s.role="textbox",s.contentEditable=!0,s.textContent=t?.value??e[0].text,r&&(r.textContent=e.find(c=>c.text===s.textContent)?.prefixIcon??e[0].prefixIcon);const l=c=>{const m=e.map(d=>{const y=re(d.text,c.target.textContent),v={textParts:y.map(h=>{const f={text:h.text};return h.addMode===!0&&(f.highlightColor="var(--color-selected)"),f}),onClick:()=>{s.textContent=d.text,t.value=d.text,d.prefixIcon&&r&&(r.textContent=d.prefixIcon)}};d.icon&&(v.icon=d.icon);const g=y.filter(h=>h.addMode===!0).map(h=>h.text).join("");return v.score=g.length,v});J(s,m,!1)};if(s.addEventListener("input",c=>{t.value=c.target.textContent,l(c)}),s.addEventListener("click",c=>{c.stopPropagation(),l(c)}),se(s),s.addEventListener("keydown",c=>{c.key==="Enter"&&(c.preventDefault(),c.target.blur())}),o.appendChild(s),i){const c=document.createElement("span");c.classList.add("icon","material-symbols-outlined","input-enum-area-dropdownselect"),c.textContent=i||"arrow_drop_down_circle",o.appendChild(c)}return o}const ne=[{type:"Task",icon:"nest_eco_leaf"},{type:"Event",icon:"event"},{type:"Idea",icon:"lightbulb"},{type:"Board",icon:"content_paste"},{type:"Note",icon:"note_stack"}],F=[{status:"Not Started",icon:"history_toggle_off",color:"#e0267a",scoreAdjust:40,quickButtons:[{icon:"rocket",setStatus:"In Progress"},{icon:"umbrella",setStatus:"On Hold"}]},{status:"In Progress",icon:"offline_bolt",color:"#7025e8",scoreAdjust:5,quickButtons:[{icon:"satellite_alt",setStatus:"Final Touch"},{icon:"cloud",setStatus:"Pending Background"},{icon:"pause_circle",setStatus:"Not Started"}]},{status:"Pending Background",icon:"cloud_circle",scoreAdjust:10,color:"#4790d8ff",quickButtons:[{icon:"rocket",setStatus:"In Progress"},{icon:"pause_circle",setStatus:"Not Started"}]},{status:"Completed",icon:"check_circle",color:"#25e88d",scoreAdjust:0},{status:"Final Touch",icon:"nest_farsight_heat",color:"#1bdabaff",scoreAdjust:2,quickButtons:[{icon:"wand_stars",setStatus:"Completed"},{icon:"recenter",setStatus:"In Progress"}]},{status:"On Hold",icon:"pause_circle",color:"#e0bb26",scoreAdjust:300,quickButtons:[{icon:"exercise",setStatus:"Not Started"},{icon:"do_not_touch",setStatus:"Cancelled"}]},{status:"Considered",icon:"lasso_select",color:"#bababaff",scoreAdjust:90,quickButtons:[{icon:"bolt",setStatus:"Not Started"},{icon:"do_not_touch",setStatus:"Cancelled"}]},{status:"Cancelled",icon:"cancel",color:"#54444b",scoreAdjust:500,quickButtons:[{icon:"electric_bolt",setStatus:"Not Started"},{icon:"flare",setStatus:"Considered"}]}],E=[{key:["type"],icon:()=>"deployed_code",value:[{name:"Type",refName:"type",type:"cardtype",initialValue:()=>({key:"cardtype|text",value:ne[0].type})}],return:{html:{},block:{},text:{}}},{key:["uid"],icon:()=>"data_object",value:[{name:"Card UID",refName:"uid",type:"text",initialValue:()=>({key:"text",value:j()}),isEditable:!1}],return:{html:{display:()=>"Simulate The Html Return of UID Block"},block:{},text:{}},isRequiredOn:["*M"],isAllowedUB:!1},{key:["title"],icon:()=>"title",value:[{name:"Card Title",refName:"title",type:"text",initialValue:()=>({key:"text",value:"Untitled"})}],return:{html:{value:(e,n)=>{const t=document.createElement("div");t.classList.add("area-horizontal");var a=C("html|text",n,"title","value");if(typeof a=="string"){const i=document.createElement("span");i.classList.add("txt-title"),i.textContent=a,a=i}return a instanceof Node&&t.appendChild(a),t}},block:{},text:{}}},{key:["description"],icon:()=>"short_text",value:[{name:"Text",refName:"text",type:"text",initialValue:()=>{const e=["Type something!","Let's explain!","Provide Info!","Label me!"];return{key:"text",value:e[Math.floor(Math.random()*e.length)]}}}],return:{html:{value:(e,n)=>{const t=document.createElement("div");t.classList.add("area-horizontal");var a=C("html|text",n,"text","value");if(typeof a=="string"){const i=document.createElement("span");i.classList.add("txt-description"),i.textContent=a,a=i}return a instanceof Node&&t.appendChild(a),t}},block:{},text:{}}},{key:["start-date"],icon:()=>"calendar_add_on",value:[{name:"Starting Date",refName:"startDate",type:"datetime",initialValue:()=>({key:"datetime",value:new Date})}],return:{html:{},block:{},text:{},datetime:{}}},{key:["end-date","deadline"],icon:()=>"calendar_clock",value:[{name:"End Date",refName:"endDate",type:"datetime",initialValue:()=>({key:"datetime",value:new Date})}],return:{html:{},block:{},text:{},datetime:{}}},{key:["list"],icon:()=>"list",value:[{name:"Items",refName:"items",type:"set-*"}],return:{html:{},block:{}}},{key:["array"],icon:()=>"more_horiz",value:[{name:"Items",refName:"items",type:"set-*"}],return:{html:{value:(e,n)=>{const t=C("set-*",n,"items","value"),a=document.createElement("div");return a.classList.add("display-container"),a.style.width="100%",a.style.height="fit-content",t?.forEach(i=>{const o=C("html|*",i,"*","value");if(!o)return;const r=document.createElement("div");if(r.style.display="inline-block",r.style.width="fit-content",r.style.maxWidth="100%",r.style.height="fit-content",r.style.backgroundColor="white",r.style.border="1px solid #c3c3c3",r.style.borderRadius="5px",r.style.boxShadow="var(--shadow-min)",r.style.padding="3px 6px",r.style.margin="2px 2px",a.appendChild(r),o instanceof Node)console.log("Happened!!",o),r.appendChild(o);else{const s=document.createElement("span");s.textContent=typeof o=="string"?o:JSON.stringify(o),r.appendChild(s)}}),a}},block:{},set:{value:(e,n)=>C("set-*",n,"items","value")}}},{key:["numbered-entry"],icon:()=>"format_list_numbered",value:[{name:"Items",refName:"items",type:"set-*"}],return:{html:{value:(e,n)=>{var t=C("html|set-*",n,"items","value");const a=[];if(t&&!(t instanceof Node)&&Array.isArray(t)){const o=E.find(s=>s.key.includes("array")),r=ue(o,"html");r&&r.length>0&&(t=r[0].value(o,n)??null,console.log("Converted Set to Html",t))}if(t&&t instanceof Node)for(var i=t;i&&i instanceof Node&&i.classList.contains("display-container");)i.childNodes.length>1?(i.childNodes.forEach(o=>{o instanceof HTMLElement&&a.push(o)}),i=null):i.childNodes.length===1?i=i.childNodes[0]:i=null;return a.length>0&&a.forEach((o,r)=>{const s=document.createElement("span");s.classList.add("num-badge"),s.style.backgroundColor="#787a7d",s.style.color="white",s.style.borderRadius="5px",s.style.fontSize="14px",s.style.fontWeight="bold",s.style.padding="1px 6px",s.style.marginRight="4px",s.textContent=(r+1).toString(),o.prepend(s)}),t}},block:{}}},{key:["image"],icon:()=>"image",value:[{name:"Source",refName:"source",type:"text|url|imagebase"}],return:{html:{value:(e,n)=>{const t=C("text|url|imagebase",n,"source","value");if(t){const a=document.createElement("img");return a.src=t,a.style.borderRadius="5px",a}return null}},block:{}}},{key:["embed","iframe"],icon:()=>"iframe",value:[{name:"Source",refName:"source",type:"url|text"}],return:{html:{value:(e,n)=>{const t=C("url|text",n,"source","value");if(t){const a=document.createElement("iframe");a.src=t,a.style.width="100%",a.style.height="auto",a.style.border="none",a.style.borderRadius="10px",a.style.marginTop="2px",a.style.position="relative";const i=document.createElement("span");return i.classList.add("icon","material-symbols-outlined"),i.textContent="open_in_new",i.style.position="absolute",i.style.top="5px",i.style.right="5px",i.style.backgroundColor=Ge("#ffffff",.75),i.style.borderRadius="50%",i.style.padding="2px",i.style.cursor="pointer",i.addEventListener("click",o=>{o.stopPropagation(),window.open(t,"_blank")}),a}return null}},block:{}}},{key:["url"],icon:()=>"link",value:[{name:"Link",refName:"link",type:"text"}],return:{html:{value:(e,n)=>{const t=C("text",n,"link","value");if(t){const a=document.createElement("span");a.classList.add("inline-value-display-url-area");const i=document.createElement("span");i.classList.add("inline-value-display-url"),i.textContent=t;const o=document.createElement("span");o.classList.add("icon","material-symbols-outlined","btn-inline-small-normal"),o.textContent="content_copy",o.title="Copy to Clipboard",o.addEventListener("click",s=>{s.stopPropagation(),navigator.permissions.query({name:"clipboard-write"}).then(l=>{l.state==="granted"||l.state==="prompt"?navigator.clipboard.writeText(t).then(()=>{console.log("Text copied to clipboard successfully!")}).catch(c=>{console.error("Failed to copy text: ",c)}):console.error("Clipboard access is denied.")}),navigator.clipboard.writeText(t).then(()=>console.log("Text copied successfully!")).catch(l=>console.error("Failed to copy text: ",l)),o.textContent="check",setTimeout(()=>{o.textContent="content_copy"},1e3)}),a.appendChild(o);const r=document.createElement("span");return r.classList.add("icon","material-symbols-outlined","btn-inline-small-normal"),r.textContent="open_in_new",r.title="Open Link in New Tab",r.addEventListener("click",s=>{s.stopPropagation(),window.open(t,"_blank")}),a.appendChild(r),a.appendChild(i),a}}},block:{},text:{value:(e,n)=>{const t=C("text",n,"link","value");return t||null}}}},{key:["ambiguous"],icon:()=>"indeterminate_question_box",value:[{name:"Content",refName:"content",type:"html|text"}],return:{html:{value:(e,n)=>{var t=C("html|text",n,"content","value");if(typeof t=="string"){const a=document.createElement("div");a.classList.add("txt-description"),a.textContent=t,t=a}return t instanceof Node&&(t.style.border="#c3c3c3 1px solid !important",t.style.color="#c3c3c3"),t}},block:{}}},{key:["checklist"],icon:()=>"checklist",return:{html:{},block:{},text:{},array:{}}},{key:["status"],icon:()=>"circle",value:[{name:"Card Status",refName:"status",type:"cardstatus|text",initialValue:()=>({key:"cardstatus",value:"Considered"})}],return:{html:{value:(e,n)=>{const t=document.createElement("div");t.style.position="relative",t.style.display="flex",t.style.flexDirection="row",t.style.justifyItems="flex-start",t.style.alignItems="flex-start",t.style.gap="4px",t.style.height="fit-content",t.style.padding="5px",t.style.borderRadius="10px",t.style.overflow="hidden";const a=C("cardstatus|text|html",n,"status","value"),i=C("cardstatus|text|html",n,"status","$");var o=null;if(typeof a=="string"&&(o=a,document.createElement("div")),o){const s=F.find(l=>l.status===o);if(s){const l=document.createElement("div");l.classList.add("area-horizontal","area-center","element-flex-child-preserve","area-fit"),l.style.padding="4px",l.style.borderRadius="10px",l.style.backgroundColor=I(s.color,null,null,null,100),l.style.boxShadow="var(--shadow-med)";const c=document.createElement("span");c.classList.add("icon","material-symbols-outlined"),c.textContent=s.icon,c.style.color="white",c.style.fontSize="15px",c.style.textShadow="var(--shadow-med)",l.appendChild(c),t.appendChild(l),s.quickButtons&&s.quickButtons.forEach(g=>{const h=document.createElement("div");h.classList.add("area-horizontal","area-center","element-flex-child-preserve","area-fit"),h.style.padding="4px",h.style.borderRadius="10px",h.style.backgroundColor=I(s.color,null,null,null,20),h.style.border=`${I(s.color,null,null,null,100)} 1px solid`,h.style.cursor="pointer",h.style.zIndex="1",h.addEventListener("click",L=>{if(L.stopPropagation(),i){de(i,g.setStatus??F[0].status);const pe=dt(i);pe&&Re(pe),me()}});const f=document.createElement("span");f.classList.add("icon","material-symbols-outlined"),f.textContent=g.icon,f.style.color=I(s.color,null,null,null,100),f.style.fontSize="15px",f.style.textShadow="var(--shadow-min)",h.appendChild(f),t.appendChild(h)});const m=document.createElement("div");m.style.borderLeft=`${I("000000",null,null,null,15)} 1.25px solid`,m.style.width=0,m.style.height="14px",t.appendChild(m);const d=document.createElement("div");d.textContent=s.status,d.style.fontWeight="700",d.style.color=I(s.color,null,null,null,100),d.style.textShadow="var(--shadow-min)",d.style.marginLeft="2px",t.appendChild(d);const y=Math.max(Math.round(Math.random()*20),5),v=7;for(var r=0;r<y;r++){const g=document.createElement("span");g.classList.add("icon","material-symbols-outlined"),g.textContent=s.icon,g.style.color=I(s.color,null,null,null,10),g.style.position="absolute",g.style.left=`${Math.random()*(100+v*2)-v}%`,g.style.top=`${Math.random()*(100+v*2)-v}%`,g.style.transform=`rotate(${Math.random()*360}deg) scale(${.75+Math.random()*1})`,t.insertBefore(g,t.firstChild)}t.style.backgroundColor=I(s.color,null,null,null,12),t.style.border=`${I(s.color,null,null,null,85)} 1.25px solid`}}return t}},block:{}}},{key:["text"],icon:()=>"abc",return:{text:{value:(e,n)=>n.value,editor:(e,n)=>{const t=document.createElement("span");return t.contentEditable=e.isEditable!==!1,t.role="textbox",t.classList.add("editor","input-text-minimum"),t.textContent=n?.value??"undefined",t.addEventListener("input",a=>{n.value=a.target.textContent}),t.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),a.target.blur())}),t}}}},{key:["set","collection"],icon:()=>"data_array",value:[{refName:"$",initialValue:()=>({key:"set",value:[]})}],return:{set:{value:(e,n)=>n.value,editor:(e,n,t)=>{const a=t?.innerValueType??"*",i=document.createElement("span");return i.classList.add("editor","inline-value-editor-set"),n.value&&n.value.length>0&&n.value.forEach((o,r)=>{const s=E.find(l=>l.key.includes(o.key));s&&K(i,o.key,n.value,s,o)}),le(i,n.value,a,{inline:!0,additive:!0,forceDataToBeValue:!0}),i}},text:{value:(e,n)=>n.value&&Array.isArray(n.value)?"["+n.value.map(t=>{const a=C("text",t,"*","value");return a||void 0}).filter(t=>t).join(", ")+"]":"[]"}}},{key:["cardtype"],icon:()=>"token",return:{cardtype:{value:(e,n)=>n.value,editor:(e,n)=>_e(ne.map(t=>({text:t.type,icon:t.icon,prefixIcon:t.icon})),e,n,"circle","arrow_drop_down_circle"),represent:["text"]}}},{key:["cardstatus"],icon:()=>"circle",return:{cardstatus:{value:(e,n)=>n.value,editor:(e,n)=>_e(F.map(t=>({text:t.status,icon:t.icon,prefixIcon:t.icon})),e,n,"circle"),represent:["text"]}}}];function Ue(e=null){const t=ie("Card Creation");t.classList.add("modal-card-creation"),t.style.maxWidth="80%",t.querySelector(".btn-modal-close").addEventListener("click",()=>{console.log("Saving a card: ",JSON.stringify(e),p.sheetID),pt(e),Re(e),me()}),e||(e=[]),st(e),at(t,e),le(t,e,"html")}function De(e,n,t=null){const a=E.find(r=>r.key.includes(e));if(!a)return;const i=n;return a.value?.forEach(r=>{!r.isOmittable&&!i.some(s=>s.refName===r.refName)&&i.push({refName:r.refName,value:r.initialValue?r.initialValue():void 0})}),{uid:j(),key:e,value:n,lastEdit:t||new Date}}function z(e,n){var t=n;if(!t){const a=E.find(i=>i.key.includes(e));a&&a.value&&a.value.length>0&&a.value.forEach(i=>{i.refName==="$"&&i.initialValue&&(t=i.initialValue().value)})}return{valueID:j(),key:e,value:t}}function de(e,n,t=!1){Array.isArray(e)?n.value&&G(n.value)&&!t?e.push(n.value):e.push(n):e.value=n,console.log("Appended to: ",e)}function rt(e,n){if(Array.isArray(e)){var t=e.findIndex(a=>a.valueID===n.valueID);t<0&&G(n.value)&&(t=e.findIndex(a=>a.uid===n.value.uid)),t>=0&&e.splice(t,1)}else e.value.valueID===n.valueID&&(e.value=void 0);console.log("Deleted from: ",e)}function st(e,n=null){n===null&&(n=ut(e)),E.forEach(t=>{var a=!1;if(t.isRequiredOn&&t.isRequiredOn.length>=0&&(t.isRequiredOn.includes("*M")&&(n==="M?"||ne.includes(n))||t.isRequiredOn.includes(n))&&(a=!0),!a||e.some(o=>t.key.includes(o.key)))return;const i=z(t.key[0],De(t.key[0],t.value.map(o=>({refName:o.refName,value:o.initialValue?o.initialValue():"<NaN>"}))));de(e,i)})}function ue(e,n){if(!e)return null;const t=lt(n);if(!t||t.length<=0||typeof e=="string"&&(e=E.find(r=>r.key.includes(e)),!e))return null;const a=[];if(e.return)for(var i of t){if(i==="*"){a.push(...Object.values(e.return));continue}if(e.return[i])a.push(e.return[i]);else{const r=Object.keys(e.return);if(r&&r.length>0)for(var o of r){const s=e.return[o].represent;s&&Array.isArray(s)&&s.includes(i)&&a.push(e.return[o])}}}return a.length>0?a:null}function lt(e){var n=e;return e.includes("-")&&(n=e.split("-")[0].trim()),n.split("|").map(t=>t.trim())}function ae(e){return e.find(n=>n.key==="uid")?.value?.find(n=>n.refName==="uid")?.value?.value}function ct(e,n){var t=null;const a=Array.isArray(n)?n:[n],i=r=>Object.prototype.toString.call(r)==="[object Object]"||Array.isArray(r)&&typeof r!="string",o=[];for(e.forEach(r=>o.push(r));o.length>0;){const r=o.shift();if(i(r)&&r.key&&a.includes(r.key)){const s=E.find(l=>l.key.includes(r.key));s&&s.return&&s.return.block&&(t||(t=[]),t.push(r))}Array.isArray(r)&&typeof r!="string"?r.forEach(s=>{i(s)&&o.unshift(s)}):Object.prototype.toString.call(r)==="[object Object]"&&Object.keys(r).forEach(s=>{const l=r[s];i(l)&&o.unshift(l)})}return t}function C(e,n,t,a,i=null){var o=n;if(o&&(G(o)?t&&o.value&&o.value.length>0?o=o.value.find(l=>t==="*"?!0:l.refName===t)?.value:o=null:o.value&&G(o.value)&&t&&o.value.value&&o.value.value.length>0&&(o=o.value.value.find(l=>t==="*"?!0:l.refName===t)?.value)),!o)return null;const r=E.find(l=>l.key.includes(o.key)&&l.return),s=ue(r,e);if(s&&s.length>0){const l=s[0];if(a==="$")return o;if(a&&l[a])return l[a].goto?C(l[a].goto,n,t,a):l[a](r,o,i)}return null}function dt(e){const n=a=>Object.prototype.toString.call(a)==="[object Object]"||Array.isArray(a)&&typeof a!="string";for(var t of N){const a=[];for(t.forEach(i=>a.push(i));a.length>0;){const i=a.shift();if(i===e)return t;Array.isArray(i)&&typeof i!="string"?i.forEach(o=>{n(o)&&a.unshift(o)}):Object.prototype.toString.call(i)==="[object Object]"&&Object.keys(i).forEach(o=>{const r=i[o];n(r)&&a.unshift(i[o])})}}return null}function ut(e){if(Array.isArray(e))return e.find(n=>n.key==="type")?.value?.find(n=>n.refName==="type").value??"M?";if(e.key&&e.key.length>0)return e.key}function G(e){if(!e.key||!e.uid||!e.value||!Array.isArray(e.value))return!1;const n=E.find(t=>t.key&&t.key.includes(e.key));return!!(n&&n.return&&n.return.block)}var N=null;function mt(){if(!p.sheetID||!p.sheetUrl){x("error","No user sheet data found, please create one.","data_alert");return}ft(),Ve()}function ft(){if(!p.sheetID||!p.sheetUrl){x("error","No user sheet data found, please create one.","data_alert");return}}function Ve(){if(!p.sheetID||!p.sheetUrl){x("error","No user sheet data found, please create one.","data_alert");return}b("Retieving user's cards",async()=>{N=(await U("loadCards",{sheetID:p.sheetID})).data.filter(n=>n.uid!=="").map(n=>JSON.parse(n.data)),me()},"mitre")}function pt(e){if(N){const n=ae(e);if(N.some(t=>ae(t)===n))return;N.push(e)}}function Re(e){const n=ae(e);b(`Saving the card ${n}`,async()=>{const t=await U("saveCard",{sheetID:p.sheetID,cardID:n,cardData:JSON.stringify(e)});console.log(t)})}const q=document.getElementById("masonrylist-container"),ht=5;let Y=null;function Oe(){if(!q)return;q.innerHTML="";const e=xt(),n=(q.getBoundingClientRect().width-(e+1)*ht)/e;for(var t=0;t<e;t++)gt(n);yt()}function yt(){console.log("============Begin New Rendering Round");const e=q.children;if(!N)return;const n=[];for(var t=0;t<N.length;t++){const o=N[t],r=document.createElement("div");r.classList.add("masonrylist-card");const s=document.createElement("div");s.classList.add("card-body-area"),r.appendChild(s),o.forEach(m=>{const d=C("html",z(m.key,m),null,"value");d&&typeof d=="object"&&s.appendChild(d)});const l=o;r.addEventListener("click",()=>{console.log(o),Ue(o)});var a=1e3;const c=ct(l,"status");if(c&&c.length>0){const m=C("cardstatus|text",c[0],"status","value");if(m){const d=F.find(y=>y.status===m);d&&(a*=(d.scoreAdjust?d.scoreAdjust:100)/100),m==="In Progress"&&r.classList.add("elevated")}}n.push({el:r,arrangement:a})}n.sort((i,o)=>i.arrangement-o.arrangement).forEach(i=>{for(var o=e[0],r=o.offsetHeight,s=1;s<e.length;s++){var l=e[s].offsetHeight;l<r&&(o=e[s],r=l)}o&&(o.appendChild(i.el),i.el.style.transform=`rotate(${(Math.random()*2-1)*1}deg)`)})}function gt(e){const n=document.createElement("div");return n.classList.add("masonrylist-column"),n.style.width=`${e}px`,n.style.flexBasis=`${e}px`,q.appendChild(n),n}function vt(){Y&&clearTimeout(Y),Y=setTimeout(()=>{Oe()},350)}function xt(){const e=window.innerWidth;return e>=1024?4:e>=768?3:e>=640?2:1}function M(e){if(e==="inside-space"){M("cards_masonry_list");return}ge.classList.add("hidden"),Ce.classList.add("hidden"),Z.classList.add("hidden"),e==="login"?ge.classList.remove("hidden"):e==="register"?Ce.classList.remove("hidden"):e==="cards_masonry_list"&&Z.classList.remove("hidden")}function me(){Z.classList.contains("hidden")||Oe()}function x(e,n,t=null,a=null,i=null){if(D.classList.remove("hidden"),he.textContent=n,t)T.textContent=t;else switch(e){case"success":T.textContent="check_circle";break;case"error":T.textContent="error";break;case"info":T.textContent="info";break;default:T.textContent="notification"}var o=a,r=i;(!o||!r)&&(e==="success"?(o="rgb(11, 195, 82)",r="rgba(11, 195, 82, 0.1)"):e==="error"?(o="rgb(216, 19, 111)",r="rgba(216, 19, 111, 0.1)"):e==="info"?(o="rgb(0, 123, 255)",r="rgba(0, 123, 255, 0.1)"):(o="rgb(128, 128, 128)",r="rgba(128, 128, 128, 0.1)")),he.style.color=o,T.style.color=o,D.style.backgroundColor=r,setTimeout(()=>{D.classList.add("hidden")},5e3),D.onclick=()=>{D.classList.add("hidden")}}let H=!1;function Ct(e,n=null){H||(B.classList.remove("hidden"),B.classList.add("animation-slide-in-y"),B.onanimationend=()=>{B.classList.remove("animation-slide-in-y")},H=!0),e&&(ze.textContent=e),n?ye.textContent=n:ye.textContent="hourglass",je.textContent=Je()}function Pe(){B.classList.contains("animation-slide-out-y")||H&&(B.classList.add("animation-slide-out-y"),B.onanimationend=()=>{B.classList.remove("animation-slide-out-y"),B.classList.add("hidden")},H=!1)}const fe="https://script.google.com/macros/s/AKfycbyw4Urv7H44nQlKdE3zxf72QU141Gc9cJUMofWJqNRW2VCXUaygJo7YP5uhR-f7c4Itvw/exec";async function Et(e){const n=`${fe}?action=${e}`,a=await(await fetch(n,{method:"GET","content-type":"text/plain;charset=utf-8"})).json();return a.status==="success"?a:(x("error","Error retrieving data: "+e+" - "+a.message),null)}async function U(e,n){const t=JSON.stringify({...n});var a=await fetch(`${fe}?action=${e}`,{method:"POST",body:t,headers:{"Content-Type":"text/plain;charset=utf-8"}}),a=await a.json();return a}async function kt(e,n,t,a){const i=JSON.stringify({uid:j(),name:e,email:n,username:t,password:a});await fetch(`${fe}?action=addNewUser`,{method:"POST",body:i,headers:{"Content-Type":"text/plain;charset=utf-8"}}).then(o=>o.text()).then(o=>console.log(o))}async function bt(){var e=await Et("fetchUsers");return e}function qe(e,n,t,a){if(!e||!n||!t||a<=0){console.error("[#] makeAction_ButtonSwitch: Missing required parameters.");return}e.dataset[t]=0,e.onclick=()=>{const i=(parseInt(e.dataset[t])+1)%a||0;e.dataset[t]=i,n(i)}}const p={uid:null,email:null,username:null,sheetID:null,sheetUrl:null};window.onload=wt;window.onresize=()=>{vt()};function wt(){}qe(R,e=>{e===0?(xe.classList.remove("hidden"),P.classList.remove("hidden"),ve.classList.add("hidden"),_.classList.add("hidden"),R.textContent="Or Login with Username"):e===1&&(xe.classList.add("hidden"),P.classList.add("hidden"),ve.classList.remove("hidden"),_.classList.remove("hidden"),R.textContent="Or Login with Email")},"currentButtonState",2);S.addEventListener("click",async()=>{const e=P.value.trim(),n=_.value.trim();if(e.length===0&&n.length===0){x("error","Please fill the email and username fields.","psychology_alt");return}const t=A.value.trim();if(t.length===0){x("error","Please enter the account password.","password");return}S.textContent="Logging in...",S.disabled=!0;const a=R.dataset.currentButtonState;b("Logging in as "+(a==="0"?e:n),async()=>{b("Retrieving the user's UID",async()=>{const i={email:null,username:null};a==="0"?i.email=e:a==="1"&&(i.username=n);const o=await U("getUserUID",i);o.status==="success"&&o.data.uid&&(p.uid=o.data.uid)},"detection_and_zone"),b("Retrieving the user's data",async()=>{if(p.uid){const i=await U("getUser",{uid:p.uid,isTestingSheet:!0});console.log("Retrieved data:",i),i.data.password===t?(i.data.email&&i.data.email!==""&&(p.email=i.data.email),i.data.username&&i.data.username!==""&&(p.username=i.data.username),!i.data.sheetID||i.data.sheetID===""||!i.data.sheetUrl||i.data.sheetUrl===""?b("Displaying the creating user modal",async()=>{te()},"add_ad"):(p.sheetID=i.data.sheetID,p.sheetUrl=i.data.sheetUrl,mt()),P.value="",_.value="",A.value="",S.textContent="Login",S.disabled=!1,x("success","Login successful.","check_circle"),M("inside-space")):(x("error","Invalid email/username or password.","psychology_alt"),S.textContent="Login",S.disabled=!1)}else b("Displaying the creating user modal",async()=>{x("error","The username/email not found, please register the new account.","psychology_alt"),M("register"),S.textContent="Login",S.disabled=!1},"add_ad")},"data_table")},"login")});$e.addEventListener("click",()=>{M("register")});qe(Q,e=>{e===0?(A.type="password",Q.querySelector(".icon").textContent="visibility"):e===1&&(A.type="text",Q.querySelector(".icon").textContent="visibility_off")},"currentButtonState",2);We.addEventListener("click",()=>{P.value="",_.value="",A.value="",M("login")});w.addEventListener("click",async()=>{const e=Ee.value.trim(),n=ke.value.trim(),t=be.value.trim();if(e.length===0||t.length===0){x("error","Name and Lastname are required.","psychology_alt");return}const a=we.value.trim(),i=Le.value.trim();if(a.length===0||i.length===0){x("error","Please fill the email and username fields.","psychology_alt");return}const o=Se.value.trim();if(o.length===0){x("error","Please enter the account password.","password");return}const r=Ie.value.trim();if(r.length===0){x("error","Please confirm the account password.","password");return}if(o!==r){x("error","Passwords do not match.","password");return}w.textContent="Checking the email/username availability...",w.disabled=!0,b("Checking the email/username availability",async()=>{var s=await bt();if(s!==null&&s.status==="success"&&s.data.length>0){if(s.data.some(l=>l.email===a)){x("error","This e-mail is already registered.","email"),w.textContent="Register",w.disabled=!1;return}else if(s.data.some(l=>l.username.toLowerCase()===i.toLowerCase())){x("error","This username is already registered.","person"),w.textContent="Register",w.disabled=!1;return}}w.textContent="Creating the registration...",b("Creating the registration",async()=>{await kt(`${e}${" "+n} ${t}`,a,i,o),w.textContent="Register",w.disabled=!1,Ee.value="",ke.value="",be.value="",we.value="",Le.value="",Se.value="",Ie.value="",P.value="",_.value="";const l=R.dataset.currentButtonState;l==="0"?P.value=a:l==="1"&&(_.value=i),A.value=o,M("login"),x("success","Account registered successfully.","wand_stars")},"fingerprint")},"id_card")});Fe.forEach(e=>{e.addEventListener("click",()=>{Ue()})});
